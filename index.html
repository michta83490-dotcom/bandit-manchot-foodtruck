<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ° La BoÃ®te Ã  Nems â€“ Jeu</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#111;
  color:#fff;
  text-align:center;
  padding:20px;
}
.machine{
  max-width:460px;
  margin:0 auto;
  padding:20px;
  background:rgba(255,255,255,0.08);
  border-radius:16px;
  border:1px solid rgba(255,255,255,0.12);
}
.reels{
  font-size:64px;
  letter-spacing:18px;
  margin:18px 0;
  user-select:none;
}
button{
  font-size:18px;
  padding:12px 18px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
}
button:disabled{
  opacity:0.5;
  cursor:not-allowed;
}
.spin{ background:#ffd700; }
.site{ background:#fff; }
.order{ background:#25D366; color:#111; }
.msg{
  margin-top:14px;
  font-size:18px;
  min-height:60px;
}
.small{
  font-size:12px;
  opacity:0.85;
  margin-top:10px;
  line-height:1.4;
}
.row{
  display:flex;
  gap:10px;
  justify-content:center;
  flex-wrap:wrap;
  margin-top:10px;
}
</style>
</head>

<body>

<h1>ğŸ° LA BOÃTE Ã€ NEMS</h1>
<p>DÃ©couvre notre universâ€¦ puis tente ta chance ğŸ</p>

<div class="machine">
  <div id="reels" class="reels">ğŸ’ â­ 7ï¸âƒ£</div>

  <div class="small">
    ğŸ‘‰ Clique dâ€™abord sur â€œDÃ©couvrir La BoÃ®te Ã  Nemsâ€, puis reviens ici pour jouer
  </div>

  <button id="spinBtn" class="spin" onclick="spin()" disabled>SPIN</button>

  <div id="msg" class="msg"></div>

  <div class="row">
    <button class="site" onclick="goSite()">DÃ©couvrir La BoÃ®te Ã  Nems</button>
    <button class="order" onclick="orderNow()">Commander maintenant</button>
  </div>

  <div class="small">
    1 partie par jour<br>
    Cadeau remis uniquement lors dâ€™une commande (selon disponibilitÃ©)
  </div>
</div>

<script>
/* =========================
   RÃ‰GLAGES
   ========================= */
const SITE_URL = "https://la-boite-a-nems-le-muy.eatbu.com";
const WHATSAPP_NUMBER = "33782549660";
const WHATSAPP_TEXT = "Bonjour ! Je souhaite commander chez La BoÃ®te Ã  Nems.";

// Chances
const CHANCE_SOFT = 5;   // ğŸ’ğŸ’ğŸ’
const CHANCE_BOX  = 8;   // â­â­â­
const CHANCE_PAD  = 20;  // 7ï¸âƒ£7ï¸âƒ£7ï¸âƒ£

const TODAY = new Date().toISOString().slice(0,10);
const PLAY_KEY = "played_" + TODAY;

/* =========================
   ELEMENTS
   ========================= */
const reels = document.getElementById("reels");
const msg   = document.getElementById("msg");
const spinBtn = document.getElementById("spinBtn");

const animSymbols = ["ğŸ’","â­","7ï¸âƒ£","ğŸ‹","ğŸ€","ğŸ””"];

/* =========================
   LOGIQUE
   ========================= */
function goSite(){
  window.open(SITE_URL, "_blank");
  localStorage.setItem("visitedSite","yes");
  spinBtn.disabled = false;
}

if(localStorage.getItem("visitedSite") === "yes"){
  spinBtn.disabled = false;
}

function orderNow(){
  const url = "https://wa.me/" + WHATSAPP_NUMBER + "?text=" + encodeURIComponent(WHATSAPP_TEXT);
  window.open(url, "_blank");
}

function alreadyPlayed(){
  return localStorage.getItem(PLAY_KEY) === "yes";
}

function markPlayed(){
  localStorage.setItem(PLAY_KEY, "yes");
}

function pickOutcome(){
  const r = Math.random();
  if(r < 1/CHANCE_PAD) return "PAD";
  if(r < 1/CHANCE_PAD + 1/CHANCE_BOX) return "BOX";
  if(r < 1/CHANCE_PAD + 1/CHANCE_BOX + 1/CHANCE_SOFT) return "SOFT";
  return "LOSE";
}

function animate(){
  const a = animSymbols[Math.floor(Math.random()*animSymbols.length)];
  const b = animSymbols[Math.floor(Math.random()*animSymbols.length)];
  const c = animSymbols[Math.floor(Math.random()*animSymbols.length)];
  reels.textContent = a + " " + b + " " + c;
}

function spin(){
  if(alreadyPlayed()){
    msg.innerHTML = "â›” Tu as dÃ©jÃ  jouÃ© aujourdâ€™hui. Reviens demain ğŸ™‚";
    return;
  }

  spinBtn.disabled = true;
  msg.textContent = "";

  const timer = setInterval(animate, 90);

  setTimeout(() => {
    clearInterval(timer);

    const outcome = pickOutcome();

    if(outcome === "PAD"){
      reels.textContent = "7ï¸âƒ£ 7ï¸âƒ£ 7ï¸âƒ£";
      msg.innerHTML = "ğŸ‰ JACKPOT !<br><b>1 Pad thaÃ¯ traditionnel nature</b>";
    } else if(outcome === "BOX"){
      reels.textContent = "â­ â­ â­";
      msg.innerHTML = "ğŸ GAGNÃ‰ !<br><b>1 box apÃ©ro 8 piÃ¨ces</b>";
    } else if(outcome === "SOFT"){
      reels.textContent = "ğŸ’ ğŸ’ ğŸ’";
      msg.innerHTML = "ğŸ¥¤ GAGNÃ‰ !<br><b>1 boisson soft</b>";
    } else {
      animate();
      msg.innerHTML = "ğŸ˜¢ Perduâ€¦ retente demain !";
    }

    markPlayed();
  }, 1200);
}

if(alreadyPlayed()){
  msg.innerHTML = "â›” Tu as dÃ©jÃ  jouÃ© aujourdâ€™hui. Reviens demain ğŸ™‚";
}
</script>

</body>
</html>
