<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>La BoÃ®te Ã  Nems - Jeu</title>
  <style>
    body{
      font-family: Arial, sans-serif;
      text-align:center;
      background:#111;
      color:#fff;
      margin:0;
      padding:24px 12px;
    }
    h1{font-size:38px;margin:10px 0 6px}
    .sub{opacity:.9;margin:0 0 18px;font-size:16px}
    .card{
      max-width:520px;
      margin:0 auto;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px;
      padding:16px 14px 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    /* Rouleaux */
    .reels{
      display:flex;
      justify-content:center;
      gap:10px;
      margin:16px 0 14px;
    }
    .reel{
      width:92px;
      height:92px;
      border-radius:14px;
      background:rgba(0,0,0,.35);
      border:1px solid rgba(255,255,255,.14);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:52px; /* GROS style casino */
      user-select:none;
    }

    button{
      padding:14px 26px;
      font-size:20px;
      border:0;
      border-radius:10px;
      cursor:pointer;
    }
    #spinBtn{
      background:#f2f2f2;
      color:#111;
      min-width:160px;
    }
    #spinBtn:disabled{
      opacity:.55;
      cursor:not-allowed;
    }
    #siteBtn{
      margin-top:12px;
      background:transparent;
      color:#fff;
      border:1px solid rgba(255,255,255,.35);
      font-size:16px;
      padding:12px 18px;
    }

    #msg{
      margin-top:12px;
      font-size:18px;
      min-height:24px;
    }
    .ok{color:#7CFF8A}
    .bad{color:#FF6B6B}
    .tiny{opacity:.85;font-size:13px;margin-top:10px;line-height:1.35}
  </style>
</head>
<body>

  <h1>ğŸ° LA BOÃTE Ã€ NEMS ğŸ°</h1>
  <div class="sub">Un petit jeu pour le plaisirâ€¦ et parfois une surprise ğŸ˜„</div>

  <div class="card">
    <div class="reels" aria-label="Machine Ã  sous">
      <div class="reel" id="r1">ğŸ’</div>
      <div class="reel" id="r2">7ï¸âƒ£</div>
      <div class="reel" id="r3">â­</div>
    </div>

    <button id="spinBtn" onclick="spin()">SPIN</button>

    <div id="msg"></div>

    <button id="siteBtn" onclick="goSite()">DÃ©couvrir La BoÃ®te Ã  Nems</button>

    <div class="tiny">
      1 chance sur 5 â€¢ 1 partie par jour<br/>
      Cadeau remis uniquement lors dâ€™une commande (selon disponibilitÃ©)
    </div>
  </div>

<script>
/* =========================
   RÃ‰GLAGES (TU CHANGES ICI)
   ========================= */

// 1 chance sur 5 => mets 5
const CHANCE_DE_GAGNER = 5;

// Ton site
const SITE_URL = "https://la-boite-a-nems-le-muy.eatbu.com/";

// Symboles â€œcasinoâ€ (tu peux en ajouter/en enlever)
const SYMBOLS = ["ğŸ’","7ï¸âƒ£","â­","ğŸ””","ğŸ’","ğŸ€","ğŸ‹","ğŸ‡","ğŸ‰","ğŸ§§"];

// Texte gagnÃ© / perdu
const TEXTE_GAGNE = "ğŸ‰ GAGNÃ‰ ! Viens au camion pour rÃ©cupÃ©rer ton cadeau ğŸ";
const TEXTE_PERDU = "ğŸ˜… Pas cette foisâ€¦ retente demain !";

// =========================

function todayKey(){
  // ClÃ© stable par jour (YYYY-MM-DD)
  return new Date().toISOString().slice(0,10);
}

function alreadyPlayedToday(){
  return localStorage.getItem("played_" + todayKey()) === "yes";
}

function markPlayedToday(){
  localStorage.setItem("played_" + todayKey(), "yes");
}

function pickSymbol(){
  return SYMBOLS[Math.floor(Math.random() * SYMBOLS.length)];
}

function goSite(){
  window.open(SITE_URL, "_blank");
}

async function spin(){
  const btn = document.getElementById("spinBtn");
  const msg = document.getElementById("msg");
  const r1 = document.getElementById("r1");
  const r2 = document.getElementById("r2");
  const r3 = document.getElementById("r3");

  // Bloque si dÃ©jÃ  jouÃ©
  if (alreadyPlayedToday()){
    msg.className = "bad";
    msg.textContent = "â›” Tu as dÃ©jÃ  jouÃ© aujourdâ€™hui. Reviens demain ğŸ˜‰";
    return;
  }

  btn.disabled = true;
  msg.textContent = "";

  // Animation â€œÃ§a tourneâ€
  const spinTime = 1200; // durÃ©e totale
  const interval = 70;   // vitesse
  const start = Date.now();

  while (Date.now() - start < spinTime){
    r1.textContent = pickSymbol();
    r2.textContent = pickSymbol();
    r3.textContent = pickSymbol();
    await new Promise(res => setTimeout(res, interval));
  }

  // RÃ©sultat final (visuel joli)
  const final1 = pickSymbol();
  const final2 = pickSymbol();
  const final3 = pickSymbol();
  r1.textContent = final1;
  r2.textContent = final2;
  r3.textContent = final3;

  // Tirage â€œ1 chance sur CHANCE_DE_GAGNERâ€
  const gagne = (Math.floor(Math.random() * CHANCE_DE_GAGNER) === 0);

  if (gagne){
    msg.className = "ok";
    msg.textContent = TEXTE_GAGNE;
  } else {
    msg.className = "bad";
    msg.textContent = TEXTE_PERDU;
  }

  // 1 partie par jour quoi quâ€™il arrive
  markPlayedToday();

  btn.disabled = false;
}

// Affiche direct un message si dÃ©jÃ  jouÃ©
window.addEventListener("load", () => {
  const msg = document.getElementById("msg");
  if (alreadyPlayedToday()){
    msg.className = "bad";
    msg.textContent = "â›” Tu as dÃ©jÃ  jouÃ© aujourdâ€™hui. Reviens demain ğŸ˜‰";
  }
});
</script>

</body>
</html>
