<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>La Boîte à Nems - Jeu</title>

  <style>
    body{
      font-family: Arial, sans-serif;
      background:#111;
      color:#fff;
      text-align:center;
      margin:0;
      padding:24px 12px;
    }
    h1{font-size:36px;margin:10px 0 6px}
    .sub{opacity:.9;margin-bottom:14px}
    .card{
      max-width:520px;
      margin:0 auto;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      border-radius:14px;
      padding:18px;
    }
    #slots{
      font-size:42px;
      letter-spacing:10px;
      margin:16px 0;
      font-weight:bold;
    }
    button{
      padding:14px 26px;
      font-size:18px;
      border-radius:12px;
      border:0;
      cursor:pointer;
      font-weight:bold;
    }
    button:disabled{opacity:.5;cursor:not-allowed}
    .primary{background:#fff;color:#111}
    .link{
      display:inline-block;
      margin-top:14px;
      padding:14px 26px;
      background:#fff;
      color:#111;
      text-decoration:none;
      border-radius:12px;
      font-weight:bold;
    }
    #msg{margin-top:14px;font-size:18px;min-height:26px}
    .ok{color:#7CFF9B}
    .no{color:#FF7C7C}
    .tiny{font-size:13px;opacity:.85;margin-top:10px;line-height:1.4}
  </style>
</head>

<body>

<h1>LA BOITE A NEMS</h1>
<p class="sub">Un petit jeu pour le plaisir… et parfois une surprise</p>

<div class="card">
  <div id="slots">NEMS PAD THAI</div>

  <button id="spinBtn" class="primary" onclick="spin()">SPIN</button>

  <div id="msg"></div>

  <a class="link" href="https://la-boite-a-nems-le-muy.eatbu.com" target="_blank">
    Decouvrir La Boite a Nems
  </a>

  <div class="tiny">
    1 chance sur 5 • 1 partie par jour<br>
    Cadeau remis uniquement lors d'une commande (selon disponibilite)
  </div>
</div>

<script>
/* ===== REGLAGES ===== */
var CHANCE_DE_GAGNER = 5;       // 1 chance sur 5
var MAX_GAGNANTS_JOUR = 10;     // par appareil

var TEXTE_GAGNE = "GAGNE ! Un cadeau t'attend.";
var TEXTE_PERDU = "Pas gagne aujourd'hui. Reviens demain.";

var SYMBOLS = ["NEMS","PAD","THAI","SOFT","X"];

/* ===== FONCTIONS ===== */
function today(){
  return new Date().toISOString().slice(0,10);
}
function key(n){ return n + "_" + today(); }

function spin(){
  var btn = document.getElementById("spinBtn");
  var slots = document.getElementById("slots");
  var msg = document.getElementById("msg");

  if(localStorage.getItem(key("played"))){
    msg.innerHTML = "<span class='no'>Tu as deja joue aujourd'hui.</span>";
    return;
  }

  var wins = parseInt(localStorage.getItem(key("wins")) || "0",10);
  if(wins >= MAX_GAGNANTS_JOUR){
    localStorage.setItem(key("played"),"1");
    msg.innerHTML = "<span class='no'>Limite de gains atteinte aujourd'hui.</span>";
    return;
  }

  btn.disabled = true;
  msg.innerHTML = "";

  var t = 0;
  var anim = setInterval(function(){
    var a = SYMBOLS[Math.floor(Math.random()*SYMBOLS.length)];
    var b = SYMBOLS[Math.floor(Math.random()*SYMBOLS.length)];
    var c = SYMBOLS[Math.floor(Math.random()*SYMBOLS.length)];
    slots.textContent = a + " " + b + " " + c;
    t++;
    if(t>=14){
      clearInterval(anim);
      finish(wins);
    }
  },80);

  function finish(w){
    localStorage.setItem(key("played"),"1");
    var win = Math.floor(Math.random()*CHANCE_DE_GAGNER) === 0;
    if(win){
      localStorage.setItem(key("wins"), w+1);
      slots.textContent = "WIN WIN WIN";
      msg.innerHTML = "<span class='ok'>" + TEXTE_GAGNE + "</span>";
    }else{
      msg.innerHTML = "<span class='no'>" + TEXTE_PERDU + "</span>";
    }
    btn.disabled = false;
  }
}
</script>

</body>
</html>
